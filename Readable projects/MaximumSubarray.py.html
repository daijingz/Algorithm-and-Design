<html>
<head>
<title>MaximumSubarray.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #629755; font-style: italic;}
.s4 { color: #6897bb;}
.s5 { color: #6a8759;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
MaximumSubarray.py</font>
</center></td></tr></table>
<pre><span class="s0"># Author: Jingze Dai</span>
<span class="s0"># Email Address: daij24@mcmaster.ca or david1147062956@163.com</span>
<span class="s0"># Github: https://github.com/daijingz</span>
<span class="s0"># Linkedin: https://www.linkedin.com/in/jingze-dai/</span>
<span class="s0"># Description: Maximum Subarray Problem</span>


<span class="s2">class </span><span class="s1">InAppropriateData(Exception):</span>
    <span class="s3">&quot;&quot;&quot;! Exception when function receives unexpected type data&quot;&quot;&quot;</span>
    <span class="s2">pass</span>


<span class="s2">class </span><span class="s1">Bull(Exception):</span>
    <span class="s3">&quot;&quot;&quot;! Exception when stock price is always rising&quot;&quot;&quot;</span>
    <span class="s2">pass</span>


<span class="s2">class </span><span class="s1">Bear(Exception):</span>
    <span class="s3">&quot;&quot;&quot;! Exception when stock price is always falling&quot;&quot;&quot;</span>
    <span class="s2">pass</span>


<span class="s2">class </span><span class="s1">MaximumSubarray:</span>
    <span class="s2">def </span><span class="s1">__init__(self</span><span class="s2">, </span><span class="s1">dailyPrice: list</span><span class="s2">, </span><span class="s1">startPrice=</span><span class="s4">100</span><span class="s1">):</span>
        <span class="s3">&quot;&quot;&quot;! Initializes the program. 
 
        @param dailyPrice   daily prices on stock markets (list of prices) 
        @param startPrice   price at the beginning of trades (price) 
        @param net          if people buy stock at the beginning day, how many benefits each day has (list of benefits) 
 
        &quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">type(startPrice) != int:</span>
            <span class="s2">raise </span><span class="s1">TypeError()</span>
        <span class="s2">elif </span><span class="s1">startPrice &lt; </span><span class="s4">0</span><span class="s1">:</span>
            <span class="s2">raise </span><span class="s1">ValueError()</span>
        <span class="s2">elif </span><span class="s1">type(dailyPrice) != list:</span>
            <span class="s2">raise </span><span class="s1">TypeError()</span>
        <span class="s2">elif </span><span class="s1">dailyPrice[</span><span class="s4">0</span><span class="s1">] != startPrice:</span>
            <span class="s2">raise </span><span class="s1">ValueError()</span>
        <span class="s2">elif </span><span class="s1">len(dailyPrice) &lt; </span><span class="s4">2</span><span class="s1">:</span>
            <span class="s2">raise </span><span class="s1">ValueError()</span>

        <span class="s1">self.__startPrice = startPrice</span>
        <span class="s1">self.__dailyPrice = []</span>
        <span class="s2">for </span><span class="s1">i </span><span class="s2">in </span><span class="s1">dailyPrice:</span>
            <span class="s1">self.__dailyPrice += [int(i)]</span>

        <span class="s1">self.__net = []</span>
        <span class="s2">for </span><span class="s1">j </span><span class="s2">in </span><span class="s1">self.__dailyPrice:</span>
            <span class="s1">self.__net += [j - self.__startPrice]</span>

    <span class="s2">def </span><span class="s1">__eq__(self</span><span class="s2">, </span><span class="s1">other):</span>
        <span class="s3">&quot;&quot;&quot;! Checks whether 2 objects are equal&quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">isinstance(other</span><span class="s2">, </span><span class="s1">MaximumSubarray):</span>
            <span class="s2">if </span><span class="s1">self.__net != other.__net:</span>
                <span class="s2">return False</span>
            <span class="s2">elif </span><span class="s1">self.__startPrice != other.__startPrice:</span>
                <span class="s2">return False</span>
            <span class="s2">elif </span><span class="s1">self.__dailyPrice != other.__dailyPrice:</span>
                <span class="s2">return False</span>
            <span class="s2">else</span><span class="s1">:</span>
                <span class="s2">return True</span>
        <span class="s2">return False</span>

    <span class="s2">def </span><span class="s1">setStartPrice(self</span><span class="s2">, </span><span class="s1">number: int):</span>
        <span class="s3">&quot;&quot;&quot;! Setting start price value&quot;&quot;&quot;</span>
        <span class="s1">self.__startPrice = number</span>

    <span class="s2">def </span><span class="s1">getStartPrice(self</span><span class="s2">, </span><span class="s1">printed=</span><span class="s2">True</span><span class="s1">):</span>
        <span class="s3">&quot;&quot;&quot;! Getting start price value&quot;&quot;&quot;</span>
        <span class="s2">try</span><span class="s1">:</span>
            <span class="s2">if </span><span class="s1">printed:</span>
                <span class="s1">print(</span><span class="s5">&quot;Start Price: &quot; </span><span class="s1">+ str(self.__startPrice))</span>
            <span class="s2">return </span><span class="s1">self.__startPrice</span>
        <span class="s2">except</span><span class="s1">:</span>
            <span class="s2">raise </span><span class="s1">Exception</span>

    <span class="s2">def </span><span class="s1">emptyDailyPrice(self):</span>
        <span class="s3">&quot;&quot;&quot;! Setting daily price values to an empty list&quot;&quot;&quot;</span>
        <span class="s1">self.__dailyPrice = []</span>

    <span class="s2">def </span><span class="s1">addDailyPrice(self</span><span class="s2">, </span><span class="s1">price):</span>
        <span class="s3">&quot;&quot;&quot;! Adding new daily price value&quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">type(price) </span><span class="s2">not in </span><span class="s1">[int</span><span class="s2">, </span><span class="s1">float]:</span>
            <span class="s2">raise </span><span class="s1">InAppropriateData()</span>
        <span class="s1">self.__dailyPrice += [price]</span>

    <span class="s2">def </span><span class="s1">getDailyPrice(self</span><span class="s2">, </span><span class="s1">printed=</span><span class="s2">True</span><span class="s1">):</span>
        <span class="s3">&quot;&quot;&quot;! Getting daily price values&quot;&quot;&quot;</span>
        <span class="s2">try</span><span class="s1">:</span>
            <span class="s2">if </span><span class="s1">printed:</span>
                <span class="s1">print(</span><span class="s5">&quot;Daily Price: &quot; </span><span class="s1">+ str(self.__dailyPrice))</span>
            <span class="s2">return </span><span class="s1">self.__dailyPrice</span>
        <span class="s2">except</span><span class="s1">:</span>
            <span class="s2">raise </span><span class="s1">Exception()</span>

    <span class="s2">def </span><span class="s1">emptyNet(self):</span>
        <span class="s3">&quot;&quot;&quot;! Setting net price values to an empty list&quot;&quot;&quot;</span>
        <span class="s1">self.__net = []</span>

    <span class="s2">def </span><span class="s1">addNet(self</span><span class="s2">, </span><span class="s1">price):</span>
        <span class="s3">&quot;&quot;&quot;! Adding new net price value&quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">type(price) </span><span class="s2">not in </span><span class="s1">[int</span><span class="s2">, </span><span class="s1">float]:</span>
            <span class="s2">raise </span><span class="s1">InAppropriateData()</span>
        <span class="s1">self.__net += [price]</span>

    <span class="s2">def </span><span class="s1">getNet(self</span><span class="s2">, </span><span class="s1">printed=</span><span class="s2">True</span><span class="s1">):</span>
        <span class="s3">&quot;&quot;&quot;! Getting net price values&quot;&quot;&quot;</span>
        <span class="s2">try</span><span class="s1">:</span>
            <span class="s2">if </span><span class="s1">printed:</span>
                <span class="s1">print(</span><span class="s5">&quot;Net Price: &quot; </span><span class="s1">+ str(self.__net))</span>
            <span class="s2">return </span><span class="s1">self.__net</span>
        <span class="s2">except</span><span class="s1">:</span>
            <span class="s2">raise </span><span class="s1">Exception()</span>

    <span class="s2">def </span><span class="s1">checkAvailable(self):</span>
        <span class="s3">&quot;&quot;&quot;! Check whether an object is an appropriate object&quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">self.__startPrice &lt;= </span><span class="s4">0</span><span class="s1">:</span>
            <span class="s2">return False</span>
        <span class="s2">elif </span><span class="s1">self.__startPrice &gt;= max(self.__dailyPrice):</span>
            <span class="s2">raise </span><span class="s1">Bull()</span>
        <span class="s2">elif </span><span class="s1">self.__startPrice &lt;= min(self.__dailyPrice):</span>
            <span class="s2">raise </span><span class="s1">Bear()</span>

        <span class="s2">for </span><span class="s1">i </span><span class="s2">in </span><span class="s1">self.getDailyPrice():</span>
            <span class="s2">if </span><span class="s1">i &lt;= </span><span class="s4">0</span><span class="s1">:</span>
                <span class="s2">return False</span>
            <span class="s2">elif </span><span class="s1">type(i) </span><span class="s2">not in </span><span class="s1">[int</span><span class="s2">, </span><span class="s1">float]:</span>
                <span class="s2">return False</span>
        <span class="s2">return True</span>

    <span class="s2">def </span><span class="s1">BruteForce(self):</span>
        <span class="s3">&quot;&quot;&quot;! Checking every situation and find the most profitable one&quot;&quot;&quot;</span>
        <span class="s2">if not </span><span class="s1">self.checkAvailable():</span>
            <span class="s2">raise </span><span class="s1">InAppropriateData()</span>

        <span class="s2">if </span><span class="s1">len(self.getDailyPrice(</span><span class="s2">False</span><span class="s1">)) == </span><span class="s4">0</span><span class="s1">:</span>
            <span class="s2">return </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span>

        <span class="s1">i = </span><span class="s4">0</span>
        <span class="s1">j = </span><span class="s4">0</span>
        <span class="s1">netIncome = </span><span class="s4">0</span>
        <span class="s1">dayNum1 = </span><span class="s4">0</span>
        <span class="s1">dayNum2 = </span><span class="s4">0</span>

        <span class="s2">while </span><span class="s1">i &lt; len(self.__dailyPrice) - </span><span class="s4">1</span><span class="s1">:</span>
            <span class="s2">while </span><span class="s1">j &lt; len(self.__dailyPrice):</span>
                <span class="s2">if </span><span class="s1">self.__net[j] - self.__net[i] &gt; netIncome:</span>
                    <span class="s1">netIncome = self.__net[j] - self.__net[i]</span>
                    <span class="s1">dayNum1 = i</span>
                    <span class="s1">dayNum2 = j</span>
                <span class="s1">j += </span><span class="s4">1</span>
            <span class="s1">i += </span><span class="s4">1</span>
            <span class="s1">j = i</span>

        <span class="s1">output = (dayNum1</span><span class="s2">, </span><span class="s1">dayNum2)</span>
        <span class="s2">return </span><span class="s1">output</span>

    <span class="s2">def </span><span class="s1">MaxAndMin(self):</span>
        <span class="s3">&quot;&quot;&quot;! Checking from best situations to find a most-profitable situation&quot;&quot;&quot;</span>
        <span class="s2">if not </span><span class="s1">self.checkAvailable():</span>
            <span class="s2">raise </span><span class="s1">InAppropriateData()</span>

        <span class="s2">if </span><span class="s1">len(self.getDailyPrice(</span><span class="s2">False</span><span class="s1">)) == </span><span class="s4">0</span><span class="s1">:</span>
            <span class="s2">return </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span>

        <span class="s1">sequence = self.__net</span>
        <span class="s1">sequence.sort()</span>
        <span class="s1">i = </span><span class="s4">0</span>
        <span class="s1">j = len(sequence) - </span><span class="s4">1</span>

        <span class="s1">output = </span><span class="s4">0</span>
        <span class="s2">while </span><span class="s1">j &gt; </span><span class="s4">0</span><span class="s1">:</span>
            <span class="s2">while </span><span class="s1">i &lt; j:</span>
                <span class="s2">if </span><span class="s1">sequence.index(sequence[i]) &lt; sequence.index(sequence[j]):</span>
                    <span class="s2">if </span><span class="s1">sequence[j] - sequence[i] &gt; output:</span>
                        <span class="s1">output = sequence[j] - sequence[i]</span>
                <span class="s1">i += </span><span class="s4">1</span>
            <span class="s2">if </span><span class="s1">i == j:</span>
                <span class="s1">i = </span><span class="s4">0</span>
                <span class="s1">j -= </span><span class="s4">1</span>
        <span class="s2">return </span><span class="s1">output</span>

    <span class="s2">def </span><span class="s1">DivideAndConquer(self):</span>
        <span class="s3">&quot;&quot;&quot;! Dividing it into small sub-problems and solve them&quot;&quot;&quot;</span>
        <span class="s2">if not </span><span class="s1">self.checkAvailable():</span>
            <span class="s2">raise </span><span class="s1">InAppropriateData()</span>

        <span class="s2">if </span><span class="s1">len(self.getDailyPrice(</span><span class="s2">False</span><span class="s1">)) == </span><span class="s4">0</span><span class="s1">:</span>
            <span class="s2">return </span><span class="s4">0</span><span class="s2">, </span><span class="s4">0</span>

        <span class="s1">middlePoint = len(self.__net) // </span><span class="s4">2</span>
        <span class="s1">inputL = self.__net</span>
        <span class="s1">inputL.sort()</span>
        <span class="s1">leftPart = inputL[:middlePoint]</span>
        <span class="s1">rightPart = inputL[middlePoint:]</span>

        <span class="s1">output = </span><span class="s4">0</span>
        <span class="s1">i = </span><span class="s4">0</span>
        <span class="s1">j = len(rightPart) - </span><span class="s4">1</span>
        <span class="s2">while </span><span class="s1">j &gt; </span><span class="s4">0</span><span class="s1">:</span>
            <span class="s2">while </span><span class="s1">i &lt; j:</span>
                <span class="s2">if </span><span class="s1">self.__net.index(leftPart[i]) &lt; self.__net.index(rightPart[j]):</span>
                    <span class="s2">if </span><span class="s1">rightPart[j] - leftPart[i] &gt; output:</span>
                        <span class="s1">output = rightPart[j] - leftPart[i]</span>
                <span class="s1">i += </span><span class="s4">1</span>
            <span class="s2">if </span><span class="s1">i == j:</span>
                <span class="s1">i = </span><span class="s4">0</span>
                <span class="s1">j -= </span><span class="s4">1</span>
        <span class="s2">return </span><span class="s1">output</span>


<span class="s2">def </span><span class="s1">fibonacci(n: int):</span>
    <span class="s3">&quot;&quot;&quot;! Divide and Conquer extra implementation&quot;&quot;&quot;</span>
    <span class="s2">if </span><span class="s1">n &lt; </span><span class="s4">0</span><span class="s1">:</span>
        <span class="s2">raise </span><span class="s1">InAppropriateData()</span>
    <span class="s2">elif </span><span class="s1">n == </span><span class="s4">0 </span><span class="s2">or </span><span class="s1">n == </span><span class="s4">1</span><span class="s1">:</span>
        <span class="s2">return </span><span class="s4">1</span>
    <span class="s2">else</span><span class="s1">:</span>
        <span class="s2">return </span><span class="s1">fibonacci(n - </span><span class="s4">1</span><span class="s1">) + fibonacci(n - </span><span class="s4">2</span><span class="s1">)</span>


<span class="s2">def </span><span class="s1">fibonacciM(n: int):</span>
    <span class="s3">&quot;&quot;&quot;! Divide and Conquer with Memorization extra implementation&quot;&quot;&quot;</span>
    <span class="s1">memo = [</span><span class="s4">1</span><span class="s2">, </span><span class="s4">1</span><span class="s1">]</span>
    <span class="s1">limit = n</span>
    <span class="s2">for </span><span class="s1">i </span><span class="s2">in </span><span class="s1">range(</span><span class="s4">3</span><span class="s2">, </span><span class="s1">limit + </span><span class="s4">1</span><span class="s1">):</span>
        <span class="s1">memo.append(memo[i - </span><span class="s4">1</span><span class="s1">] + memo[i - </span><span class="s4">2</span><span class="s1">])</span>
    <span class="s2">return </span><span class="s1">memo[-</span><span class="s4">1</span><span class="s1">]</span></pre>
</body>
</html>